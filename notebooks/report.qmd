---
title: "Mushroom Classification"
author: "Author Name"
date: "`r Sys.Date()`"
jupyter: poisonous_mushroom_classifier
format:
  pdf: default
execute:
  echo: true
  warning: false
  error: true
  cache: false
---

# Document starts here

```{python}
import requests
import zipfile
# First step is adding the downloaded data to the data directory by code

# download data as zip and extract
url = "https://archive.ics.uci.edu/static/public/73/mushroom.zip"

response = requests.get(url)
with open("../data/raw/mushroom.zip", 'wb') as f:
    f.write(response.content)

with zipfile.ZipFile("../data/raw/mushroom.zip", 'r') as zip_ref:
    zip_ref.extractall("../data/raw")
```

# Data cleaning and wrangling
```{python}
import pandas as pd
col_names = [
    "class", "cap_shape", "cap_surface", "cap_color", "bruises", "odor",
    "gill_attachment", "gill_spacing", "gill_size", "gill_color",
    "stalk_shape", "stalk_root",
    "stalk_surface_above_ring", "stalk_surface_below_ring",
    "stalk_color_above_ring", "stalk_color_below_ring",
    "veil_type", "veil_color",
    "ring_number", "ring_type",
    "spore_print_color", "population", "habitat"
]

df = pd.read_csv("../data/raw/agaricus-lepiota.data", names=col_names)

# Changing the target to numeric values: poisonous=1, edible=0
df["class_label"] = df["class"].map({"p": 1, "e": 0})

# Drop rows with na in the target column
df = df.dropna(subset=["class_label"])

df.head()
```

# EDA summary
```{python}
# Basic information
df.info()
```
